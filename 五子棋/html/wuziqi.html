
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>wuziqi</title><meta name="generator" content="MATLAB 9.5"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-07-23"><meta name="DC.source" content="wuziqi.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><pre class="codeinput"><span class="comment">%Author:LeiZhen</span>
<span class="comment">%Date:2018-03-12</span>
<span class="comment">%&#27492;&#31243;&#24207;&#21482;&#19979;&#20116;&#23376;&#26827;&#65292;&#24182;&#21028;&#26029;&#32988;&#36127;&#20851;&#31995;</span>
clear <span class="string">all</span>;
clc
<span class="comment">%&#23450;&#20041;&#39068;&#33394;</span>
Color_QiPanBack=[135,206,255];
Color_ChessLine=[100,100,100];
<span class="comment">%&#33719;&#32988;&#36830;&#23376;&#25968;</span>
Num_Victory=5;
Dpixel=33;
NumCell=14;<span class="comment">%&#26827;&#30424;&#26684;&#30340;&#34892;&#25110;&#21015;&#25968;</span>
Wid_edge=18;
[M_QiPan,xcol_ChessLine,yrow_ChessLine]=QiPan(NumCell,Dpixel,Wid_edge,Color_QiPanBack,Color_ChessLine);
imshow(M_QiPan);
set (gcf,<span class="string">'Position'</span>,[600,45,625,625]);
set (gca,<span class="string">'Position'</span>,[0,0,1,1]);
hold <span class="string">on</span>,
<span class="comment">%&#26827;&#21322;&#24452;</span>
radius_Chess=15;
M_LuoZi=zeros(NumCell+1,NumCell+1,2);
VictoryB=0;
VictoryW=0;
StateB=1;
StateW=2;
NumChess=0;
<span class="keyword">for</span> i=1:(NumCell+1)^2
    [x_col_Chess, y_row_Chess]=ginput_pointer(1);
    <span class="comment">%&#33719;&#24471;&#36317;&#31163;&#40736;&#26631;&#28857;&#20987;&#28857;&#26368;&#36817;&#30340;&#19979;&#26827;&#28857;&#30340;&#22352;&#26631;,&#24182;&#20445;&#35777;&#28857;&#20987;&#30340;&#19979;&#26827;&#28857;&#22312;&#26827;&#30424;&#20869;</span>
    <span class="keyword">if</span> x_col_Chess&lt;max(xcol_ChessLine)+Dpixel/2&amp;&amp;x_col_Chess&gt;min(xcol_ChessLine)-Dpixel/2&amp;&amp;y_row_Chess&lt;max(yrow_ChessLine)+Dpixel/2&amp;&amp;y_row_Chess&gt;min(yrow_ChessLine)-Dpixel/2
        <span class="keyword">for</span> x_i=xcol_ChessLine
            <span class="keyword">if</span> abs(x_col_Chess-x_i)&lt;Dpixel/2;
                x_col_Chess=x_i;
            <span class="keyword">end</span>
        <span class="keyword">end</span>
        <span class="keyword">for</span> y_i=yrow_ChessLine
            <span class="keyword">if</span> abs(y_row_Chess-y_i)&lt;Dpixel/2;
                y_row_Chess=y_i;
            <span class="keyword">end</span>
        <span class="keyword">end</span>
    <span class="comment">%&#28857;&#20987;&#24724;&#26827;&#21306;&#65288;&#26827;&#30424;&#22806;&#30340;&#21306;&#22495;&#65289;&#24724;&#26827;</span>
    <span class="keyword">else</span>
        [x_col_LuoZi_old,y_row_LuoZi_old]=find(M_LuoZi(:,:,2)==max(max(M_LuoZi(:,:,2))));
        x_col_Chess_old=(x_col_LuoZi_old-1)*Dpixel+Wid_edge+1;
        y_row_Chess_old=(y_row_LuoZi_old-1)*Dpixel+Wid_edge+1;
        <span class="keyword">if</span> NumChess&gt;=1
            M_QiPan=Chess(M_QiPan,x_col_Chess_old,y_row_Chess_old,radius_Chess,3,Wid_edge,Dpixel,Color_QiPanBack,Color_ChessLine);
            imshow(M_QiPan);
            NumChess=NumChess-1;
            M_LuoZi(x_col_LuoZi_old,y_row_LuoZi_old,1)=0;
            M_LuoZi(x_col_LuoZi_old,y_row_LuoZi_old,2)=0;
        <span class="keyword">end</span>
        <span class="keyword">continue</span>;
    <span class="keyword">end</span>
    <span class="comment">%&#33853;&#23376;&#24182;&#38450;&#27490;&#37325;&#22797;&#22312;&#21516;&#19968;&#20010;&#19979;&#26827;&#28857;&#33853;&#23376;</span>
    x_col_LuoZi=(x_col_Chess-Wid_edge-1)/Dpixel+1;
    y_row_LuoZi=(y_row_Chess-Wid_edge-1)/Dpixel+1;
    <span class="keyword">if</span> M_LuoZi(x_col_LuoZi,y_row_LuoZi,1)==0
        NumChess=NumChess+1;
        M_LuoZi(x_col_LuoZi,y_row_LuoZi,2)=NumChess;
        <span class="keyword">if</span> mod(NumChess,2)==1
            M_QiPan=Chess(M_QiPan,x_col_Chess,y_row_Chess,radius_Chess,1,Wid_edge,Dpixel,Color_QiPanBack,Color_ChessLine);
            imshow(M_QiPan);
            M_LuoZi(x_col_LuoZi,y_row_LuoZi,1)=StateB; <span class="comment">%&#33853;&#23376;&#20026;&#40657;&#26827;</span>
            VictoryB=Victory_Judge(M_LuoZi,x_col_LuoZi,y_row_LuoZi,StateB);
        <span class="keyword">elseif</span> mod(NumChess,2)==0
            M_QiPan=Chess(M_QiPan,x_col_Chess,y_row_Chess,radius_Chess,2,Wid_edge,Dpixel,Color_QiPanBack,Color_ChessLine);
            imshow(M_QiPan);
            M_LuoZi(x_col_LuoZi,y_row_LuoZi,1)=StateW; <span class="comment">%&#33853;&#23376;&#20026;&#30333;&#26827;</span>
            VictoryW=Victory_Judge(M_LuoZi,x_col_LuoZi,y_row_LuoZi,StateW);
        <span class="keyword">end</span>
    <span class="keyword">end</span>
    <span class="comment">%&#26174;&#31034;&#33719;&#32988;&#20449;&#24687;</span>
    <span class="keyword">if</span> VictoryB==1
        <span class="comment">%&#26222;&#36890;&#23545;&#35805;&#26694;</span>
        h=dialog(<span class="string">'name'</span>,<span class="string">'&#23545;&#23616;&#32467;&#26463;'</span>,<span class="string">'position'</span>,[500 350 250 100]);
        uicontrol(<span class="string">'parent'</span>,h,<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'string'</span>,<span class="string">'&#40657;&#26827;&#33719;&#32988;&#65281;'</span>,<span class="string">'position'</span>,[35 35 200 50],<span class="string">'fontsize'</span>,30);
        uicontrol(<span class="string">'parent'</span>,h,<span class="string">'style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'position'</span>,[150 5 80 30],<span class="string">'fontsize'</span>,20,<span class="string">'string'</span>,<span class="string">'&#30830;&#23450;'</span>,<span class="string">'callback'</span>,<span class="string">'delete(gcbf)'</span>);
        <span class="keyword">break</span>;
    <span class="keyword">elseif</span> VictoryW==1
        <span class="comment">%&#26222;&#36890;&#23545;&#35805;&#26694;</span>
        h=dialog(<span class="string">'name'</span>,<span class="string">'&#23545;&#23616;&#32467;&#26463;'</span>,<span class="string">'position'</span>,[500 350 250 100]);
        uicontrol(<span class="string">'parent'</span>,h,<span class="string">'style'</span>,<span class="string">'text'</span>,<span class="string">'string'</span>,<span class="string">'&#30333;&#26827;&#33719;&#32988;&#65281;'</span>,<span class="string">'position'</span>,[35 35 200 50],<span class="string">'fontsize'</span>,30);
        uicontrol(<span class="string">'parent'</span>,h,<span class="string">'style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'position'</span>,[150 5 80 30],<span class="string">'fontsize'</span>,20,<span class="string">'string'</span>,<span class="string">'&#30830;&#23450;'</span>,<span class="string">'callback'</span>,<span class="string">'delete(gcbf)'</span>);
        <span class="keyword">break</span>;
    <span class="keyword">end</span>
<span class="keyword">end</span>
</pre><pre class="codeoutput">&#35686;&#21578;: &#19981;&#20877;&#25903;&#25345;&#23436;&#20840;&#20132;&#21449;&#25351;&#38024;&#12290;&#23558;&#25913;&#29992;&#20132;&#21449;&#25351;&#38024;&#12290; 
</pre><pre class="codeoutput error">&#38169;&#35823;&#20351;&#29992; ginput_pointer (line 114)
&#24050;&#34987;&#22270;&#31383;&#21024;&#38500;&#25805;&#20316;&#20013;&#26029;

&#20986;&#38169; wuziqi (line 28)
    [x_col_Chess, y_row_Chess]=ginput_pointer(1);
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2018b</a><br></p></div><!--
##### SOURCE BEGIN #####
%Author:LeiZhen
%Date:2018-03-12
%此程序只下五子棋，并判断胜负关系
clear all;
clc
%定义颜色
Color_QiPanBack=[135,206,255];
Color_ChessLine=[100,100,100];
%获胜连子数
Num_Victory=5;
Dpixel=33;
NumCell=14;%棋盘格的行或列数
Wid_edge=18;
[M_QiPan,xcol_ChessLine,yrow_ChessLine]=QiPan(NumCell,Dpixel,Wid_edge,Color_QiPanBack,Color_ChessLine);
imshow(M_QiPan);
set (gcf,'Position',[600,45,625,625]);
set (gca,'Position',[0,0,1,1]);
hold on,
%棋半径
radius_Chess=15;
M_LuoZi=zeros(NumCell+1,NumCell+1,2);
VictoryB=0;
VictoryW=0;
StateB=1;
StateW=2;
NumChess=0;
for i=1:(NumCell+1)^2
    [x_col_Chess, y_row_Chess]=ginput_pointer(1);
    %获得距离鼠标点击点最近的下棋点的坐标,并保证点击的下棋点在棋盘内
    if x_col_Chess<max(xcol_ChessLine)+Dpixel/2&&x_col_Chess>min(xcol_ChessLine)-Dpixel/2&&y_row_Chess<max(yrow_ChessLine)+Dpixel/2&&y_row_Chess>min(yrow_ChessLine)-Dpixel/2
        for x_i=xcol_ChessLine
            if abs(x_col_Chess-x_i)<Dpixel/2;
                x_col_Chess=x_i;
            end
        end
        for y_i=yrow_ChessLine
            if abs(y_row_Chess-y_i)<Dpixel/2;
                y_row_Chess=y_i;
            end
        end
    %点击悔棋区（棋盘外的区域）悔棋
    else
        [x_col_LuoZi_old,y_row_LuoZi_old]=find(M_LuoZi(:,:,2)==max(max(M_LuoZi(:,:,2))));
        x_col_Chess_old=(x_col_LuoZi_old-1)*Dpixel+Wid_edge+1;
        y_row_Chess_old=(y_row_LuoZi_old-1)*Dpixel+Wid_edge+1;
        if NumChess>=1
            M_QiPan=Chess(M_QiPan,x_col_Chess_old,y_row_Chess_old,radius_Chess,3,Wid_edge,Dpixel,Color_QiPanBack,Color_ChessLine);
            imshow(M_QiPan);
            NumChess=NumChess-1;
            M_LuoZi(x_col_LuoZi_old,y_row_LuoZi_old,1)=0;
            M_LuoZi(x_col_LuoZi_old,y_row_LuoZi_old,2)=0;
        end
        continue;
    end
    %落子并防止重复在同一个下棋点落子
    x_col_LuoZi=(x_col_Chess-Wid_edge-1)/Dpixel+1;
    y_row_LuoZi=(y_row_Chess-Wid_edge-1)/Dpixel+1;
    if M_LuoZi(x_col_LuoZi,y_row_LuoZi,1)==0
        NumChess=NumChess+1;
        M_LuoZi(x_col_LuoZi,y_row_LuoZi,2)=NumChess;
        if mod(NumChess,2)==1
            M_QiPan=Chess(M_QiPan,x_col_Chess,y_row_Chess,radius_Chess,1,Wid_edge,Dpixel,Color_QiPanBack,Color_ChessLine);
            imshow(M_QiPan);
            M_LuoZi(x_col_LuoZi,y_row_LuoZi,1)=StateB; %落子为黑棋
            VictoryB=Victory_Judge(M_LuoZi,x_col_LuoZi,y_row_LuoZi,StateB);
        elseif mod(NumChess,2)==0
            M_QiPan=Chess(M_QiPan,x_col_Chess,y_row_Chess,radius_Chess,2,Wid_edge,Dpixel,Color_QiPanBack,Color_ChessLine);
            imshow(M_QiPan);
            M_LuoZi(x_col_LuoZi,y_row_LuoZi,1)=StateW; %落子为白棋
            VictoryW=Victory_Judge(M_LuoZi,x_col_LuoZi,y_row_LuoZi,StateW);
        end
    end
    %显示获胜信息
    if VictoryB==1
        %普通对话框
        h=dialog('name','对局结束','position',[500 350 250 100]);
        uicontrol('parent',h,'style','text','string','黑棋获胜！','position',[35 35 200 50],'fontsize',30);
        uicontrol('parent',h,'style','pushbutton','position',[150 5 80 30],'fontsize',20,'string','确定','callback','delete(gcbf)');
        break;
    elseif VictoryW==1
        %普通对话框
        h=dialog('name','对局结束','position',[500 350 250 100]);
        uicontrol('parent',h,'style','text','string','白棋获胜！','position',[35 35 200 50],'fontsize',30);
        uicontrol('parent',h,'style','pushbutton','position',[150 5 80 30],'fontsize',20,'string','确定','callback','delete(gcbf)');
        break;
    end
end

##### SOURCE END #####
--></body></html>